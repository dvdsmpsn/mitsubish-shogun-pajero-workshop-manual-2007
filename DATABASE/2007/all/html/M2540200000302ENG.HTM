<html><head><SCRIPT LANGUAGE="JavaScript" SRC="../../../script/w000000000_m00.js"></SCRIPT><LINK rel="stylesheet" href="../../../css/03_m0000.css" type="text/css"></LINK><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><title>OPERATION</title></head><body class="fontmain" onLoad="SetCharset()"><a name="M25402000003ENG0000010000"></a><h1><h1>OPERATION</h1><br /></h1><p align="right" STYLE="font-size:09pt; font-family:Arial;">M25402000003ENG0000010000</p><BR /><hr width="90%" /><b></b><br /><a href="javascript:enlarge('../../../img/54/ZC5001060000ENG.png')"><img class="imgtbl505" width="505" src="../../../img/54/ZC5001060000ENG.png"></img></a><br />The CAN communication system is described below.<br /><b></b><br /><ul><li type="1">Each ECU communicating with CAN periodically sends
several sensors&#8217; information on CAN bus as data frame (called periodical sending data). For
further details, refer to the data frame section<a href="#A4"><img src="../../../buttons/03btn007.png"></img></a>.<br /></li><li type="1">ECUs requiring data on CAN bus can receive data frames sent from each ECU simultaneously.<br /></li><li type="1">The data sent from each ECU conducting CAN communication is transmitted at 10-1000msec interval
depending on necessity of data.<br /><table class="fontattn" border="1" width="100%"><tr><td class="" bgcolor="#aaaaff" width="60"><b>note</b></td><td bgcolor="#aaaaff">In the figure above, the data frame A is transmitted in "a" intervals, while the data
frames B and C are transmitted at intervals "b" and "c," respectively.<br /></td></tr></table></li><li type="1">A single ECU transmits multiple data frames.<br /></li><li type="1">When data frames conflict with one another (when plural ECUs transmit signals simultaneously),
data is prioritised for transmission by mediation, therefore, plural data frames are not sent
simultaneously. For further details, refer to the mediation section<a href="#A2"><img src="../../../buttons/03btn007.png"></img></a>.<br /></li><li type="1">Data is transmitted not by the conventional voltage-using method but by voltage
potential difference. For further details, refer to the section on CAN bus voltage transformation<a href="#A3"><img src="../../../buttons/03btn007.png"></img></a>  .<br /></li><li type="1">Reliability of each ECU transmitting signals via CAN communication is secured by
several error detection and recovery processes. For further details, refer to the sections on
error detection and system recovery<a href="#A5"><img src="../../../buttons/03btn007.png"></img></a>.<br /></li></ul><hr width="90%" /><a name="A2"></a><hr width="70%" /><h3>MEDIATION</h3><br />Because each ECU transmits data independently on the CAN bus, there are cases of data
collision when multiple data frames that ECUs attempt to transmit simultaneously (if multiple
ECUs transmit at nearly the same moment). At this moment, processing of the ECUs attempting
transmission is performed in the following way.<br /><b></b><br /><ol><li type="1">Data frame with high priority is transmitted first according
to ID codes memorized in data frames.<br /></li><li type="1">Transmission of low-priority data (data frames) is suspended by the issuing ECUs
until the bus clears (when no transmission data exists on the CAN bus).<br /><table class="fontattn" border="1" width="100%"><tr><td class="" bgcolor="#aaaaff" width="60"><b>note</b></td><td bgcolor="#aaaaff">If the suspended state continues for a specific time, new data (data frame content) is created
and sent.<br /></td></tr></table></li><li type="1">ECU containing suspended data frames transmits the data when the bus becomes available.<br /></li></ol><table class="fontattn" border="1" width="100%"><tr><td class="" bgcolor="#aaaaff" width="60"><b>note</b></td><td bgcolor="#aaaaff">There is enough capacity on the CAN bus, which never prevents data frames from being sent.<br /></td></tr></table><a name="A3"></a><hr width="70%" /><h3>VOLTAGE TRANSFORMATION ON THE CAN BUS</h3><br /><b></b><br /><a href="javascript:enlarge('../../../img/54/ZC5001070000ENG.png')"><img class="imgtbl505" width="505" src="../../../img/54/ZC5001070000ENG.png"></img></a><br />Data frame transmission through the CAN bus line involves voltage transformation (for
output signals) in the distinctive CAN profile as follows. The ECU transmitting through the
CAN&#95;H and CAN&#95;L bus lines sends 2.5-3.5 V signals to the CAN&#95;H side
and 2.5-1.5 V signals to the CAN&#95;L side. The receiving ECU reads the data from the
CAN&#95;H and CAN&#95;L potential difference. "Recessive" refers to the state where
both CAN&#95;H and CAN&#95;L are under the 2.5 V state, and "Dominant" refers to the
state where CAN&#95;H is under the 3.5 V state and CAN&#95;L is under the 1.5 V state.
By transformation mainly to 2.5 V, even in cases when voltage is rendered 0 from faulty grounding
or the like (causing a problem of an approximate 0.5 voltage increase on the communications
line), communication can be continued uninterrupted. Employing dual communications lines improves
reliability to prevent the presence of noise, compared to the conventional communication method.<br /><a name="A4"></a><hr width="70%" /><h3>DATA FRAMES</h3><br /><b></b><br /><a href="javascript:enlarge('../../../img/54/ZC5001080000ENG.png')"><img class="imgtbl505" width="505" src="../../../img/54/ZC5001080000ENG.png"></img></a><br /><b>SOF (Start of Frame)</b><br /><ul><li type="1">Indicates the start of the frame<br /></li></ul><b>ID (Identifier) region</b><br /><ul><li type="1">Identifies the data content while specifying priority rank in case of mediation<br /></li></ul><b>Control region</b><br /><ul><li type="1">Specifies the frame type, data length, etc.<br /></li></ul><b>Data region</b><br /><ul><li type="1">Values used for data control, etc.<br /></li></ul><b>Cyclic Redundancy Check (CRC) region</b><br /><ul><li type="1">Region where to check for errors in sent data. The transmitting ECU calculates data
regions by applying prescribed operations and stores the results. The receiving ECU detects
erroneous communication by comparing the CRC region with the data region.<br /></li></ul><b>ACK (Acknowledge) region</b><br /><ul><li type="1">Region where to conform the reception of sent data<br /></li></ul><b>EOF (End of Frame)</b><br /><ul><li type="1">Indicates the end of the frame<br /></li></ul><a name="A5"></a><hr width="70%" /><h3>ERROR DETECTION AND RECOVERY</h3><br />CAN protocol secures its reliability of communication by providing several error detection
function such as CRC shown in data frame, and the recovery function (recovery is performed by
resending, from abnormal state such as transmission errors). If an error is detected but it
is not resolved even after recovery, communication is stopped. This state is called "Bus Off."<br /></body></html>
